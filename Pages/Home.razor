@page "/"
@using JDR.Models

<h3>Grille avec Joueur</h3>

<div 
    class="grid" 
    tabindex="0" 
    @onkeydown="HandleKeyDown"
>
    @for (int row = 0; row < GridSize; row++)
    {
        @for (int col = 0; col < GridSize; col++)
        {
            <div class="cell @(row == player.Y && col == player.X ? $"sprite {player.FacingDirection}" : "")"></div>
        }
    }
</div>

@code {
    private const int GridSize = 10;
    private Player player = new Player();

    private void HandleKeyDown(KeyboardEventArgs e)
    {
        if (e.Key.StartsWith("Arrow"))
        {
            string direction = e.Key.Replace("Arrow", ""); // Extrait "Up", "Down", "Left", ou "Right"
            player.Move(direction, GridSize);
            StateHasChanged(); // Met à jour l'affichage
        }
    }
}